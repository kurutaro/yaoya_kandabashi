# 買えるところに連れてくでー

買い物先に行ったら、欲しい物が売ってねぇ…。

至るところに探し回る…なんて経験ありませんか？

## デプロイ先URL
https://yaoya-kandabashi.onrender.com

## 11/2 ９（水） 共有事項

- [ ] Seed データにヨーグルト、舞茸重複問題
- [ ] main ブランチ push して良き？(package.json と新規シードファイル作成しました)
- [ ] バックエンド側のアンドン引く？
- [ ] フロントエンド側の進捗厳しい？
- [ ] 17 ｰ 18 時からのイベント聞きに行きます？
- [ ] その他あればどしどし

## 画面遷移イメージ

- Login 画面(passport 実装時に必要)
- Home 画面(なくても良い？)
- 買い物リスト入力画面と検索ボタン(GET メソッド)
  - バックエンド側から提案された店名のリストが返ってくる
- リストを元にどのお店に行くかを選択する画面
- 買い忘れ防止リスト表示画面

画面遷移の工程イメージ

```mermaid
graph TD

A[login画面]-->|最初はなくてもいい|B[Home画面]
A-->C[買い物リスト入力画面]
B-->|最初はなくてもいい|C
C-->D[お店レコメンド結果]
D-->|後追い|E[GoogleMap等の表示画面]
D-->F[買い物忘れ防止リスト画面]
E-->F
F-->|後追い|E

```

## 買い物リストの送信とお店提案ロジックフロー

仮作成実施。
最小の店舗で購入できる状態を優先しお店をサーチし提案する。

```mermaid
graph TD

A[買い物リスト送信] --> B{すべての商品が<br>購入できる<br>お店があるか？}
B-->|Yes| C[買い物リストテーブルに<br>購入物を保存する]
C--> C2[お店の名前Arrayを返す]
C2-->C3[END]
B-->|No| D[お店の名前Arrayに<br>最初の店名をpushする]
D-->E[足りないリストを<br>ピックアップする]
E-->F{その他のお店で<br>足りないリストが<br>全て購入できるか？}
F-->|Yes| G[買い物リストテーブルに<br>購入物を保存する]
G-->|Yes| G2[追加の店名を<br>お店の名前Arrayに<br>pushする]
G2-->G3[END]
F-->|No| H[買い物リストテーブルに<br>購入物を保存する]
H--> H2[最も多くの<br>品目が購入できる<br>店名をpushする]
H2-->E
```

## ER 図

user テーブルのソルト・ハッシュが必要になるのか不明(passport)がどんなものかまだわかってません…。

```mermaid
erDiagram
  store_list ||--o{ storage: "お店idと店名を紐付ける"
  customer ||--o{ shopping_list: "ユーザーidと買い物リストを紐付ける"
  store_list ||--o{ shopping_list: "お店idと買い物リストを紐付ける"

    customer {
      int(32) id PK
      string name "ユーザー名"
      string(8) salt "ソルト"
      string(64) hash "ハッシュ"
    }

    store_list {
      int(32) id PK
      string(32) storeName "店名"
      int(32) northLatitude "北緯"
      int(32) eastLongitude "東経"
    }

    storage {
      int(32) id PK
      int(32) storeId "お店id"
      string(32) productName "商品名"
      string(32) productShape "形状"
      int(32) piece "在庫数"
      int(32) price "金額"
    }

    shopping_list {
      int(32) id PK
      int(32) userId "ユーザーid"
      int(32) storeId "お店id"
      string(32) productName "商品名"
      int(32) piece "在庫数"
      boolean flag "購入済みフラグ"
      timestamp time "タイムスタンプ"
    }

```

## 機能作成優先順位

1. 買い物リストをユーザー側が入力し、お店を提案してくる
2. 買い物リストのチェックボックスを入れて買い忘れ防止機能
3. passport を使ったログイン認証機能(必須要件)
4. 提案されたお店に対するルート案内
5. 距離優先か安さ優先かを選択できる

## 大日程案

基本的な日程は、

- 11/28(火), 11/29(水)11/30(木)の丸３日
- 12/01(金)AM、12/04(月)AM の半日ずつ。

マイルストーン
11/29(水)中：デプロイまで実施が必達

- [ ] 11/28(火)で機能作成優先順位１を完成させたい。
- [ ] 11/29(水)で機能作成優先順位２を完成させる+デプロイまで。
- [ ] 11/30(木)で３の機能実装と 4 の実装準備
- [ ] 12/01(金)AM に 3 まで完成(基本要件は最低限抑える)
- [ ] 12/04(月)地図表示機能・発表資料作成

がふわっとしたイメージ？か。

## 日程計画案 11/29(水)

AM まで:

- [ ] フロントエンド側(はっしーさん対応)

  - [ ] Input ページの作成
  - [ ] お店表示画面の作成
  - [ ] 買い物リストチェックボックス作成

- [ ] バックエンド側(Jin さん対応)

  - [ ] Input に対するレスポンス作成
  - [ ] お店の結果返答作成
  - [ ] 買い物チェックリスト用データの送付

- [ ] ローカル環境下で動作テスト(3 人で頑張る)
  - [ ] CORS エラー回避対応必要か？
  - [ ] データの授受が正しく行えているかの確認
    - [ ] (動けばよかろうなのだ)

PM から:

- [ ] デプロイの実施(主にはっしーとたなちゅー対応)

  - [ ] フロントエンドの環境変数調整
  - [ ] バックエンド側の環境変数調整

- [ ] バックエンド側(Jin さん対応)
  - [ ] その他のエンドポイント動作作成
  - [ ] passportjs の実装開始
